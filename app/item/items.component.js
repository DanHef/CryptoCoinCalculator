"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var nativescript_secure_storage_1 = require("nativescript-secure-storage");
var CurrencyPrice_1 = require("./CurrencyPrice");
var item_service_1 = require("./item.service");
var ItemsComponent = (function () {
    function ItemsComponent(itemService) {
        this.itemService = itemService;
        this.currencyPricesBitstamp = [new CurrencyPrice_1.CurrencyPrice("ltc", "eur", "bitstamp"),
            new CurrencyPrice_1.CurrencyPrice("btc", "eur", "bitstamp"),
            new CurrencyPrice_1.CurrencyPrice("xrp", "eur", "bitstamp")];
        this.currencyPricesBitfinex = [new CurrencyPrice_1.CurrencyPrice("iot", "btc", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("btc", "eur", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("eth", "usd", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("iot", "eth", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("btc", "usd", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("dsh", "usd", "bitfinex"),
            new CurrencyPrice_1.CurrencyPrice("dsh", "btc", "bitfinex")];
        this.secureStorage = new nativescript_secure_storage_1.SecureStorage();
    }
    ItemsComponent.prototype.ngOnInit = function () {
        this.readSecureStorage();
        this.refreshBitfinexData();
        this.refreshBitstampData();
    };
    ItemsComponent.prototype.refreshAll = function (pullToRefresh) {
        var promiseBitfinex = this.refreshBitfinexData();
        var promiseBitstamp = this.refreshBitstampData();
        Promise.all([promiseBitfinex, promiseBitstamp]).then(function () {
            pullToRefresh.refreshing = false;
        });
    };
    ItemsComponent.prototype.refreshBitstampData = function () {
        var _this = this;
        var promises = [];
        for (var i = 0; i < this.currencyPricesBitstamp.length; i++) {
            var promise = this.itemService.loadDataFromBitstampWithSymbol(this.currencyPricesBitstamp[i]);
            promises.push(promise);
        }
        return new Promise(function (resolve, reject) {
            Promise.all(promises).then(function () {
                _this.calculateAll();
                resolve(true);
            });
        });
    };
    ItemsComponent.prototype.refreshBitfinexData = function () {
        var _this = this;
        var promises = [];
        for (var i = 0; i < this.currencyPricesBitfinex.length; i++) {
            var promise = this.itemService.loadDataFromBitfinexWithSymbol(this.currencyPricesBitfinex[i]);
            promises.push(promise);
        }
        return new Promise(function (resolve, reject) {
            Promise.all(promises).then(function () {
                _this.calculateAll();
                resolve(true);
            });
        });
        /*let promiseIota = this.itemService.loadIotaBTCData().then((BTCKurs) => {
            this.IOTABTCKurs = BTCKurs;
        });

        let promiseBTCEuro = this.itemService.loadBTCEuroData().then((BTCEuroKurs) => {
            this.BTCEURKurs = BTCEuroKurs;
        });

        let promiseETHUSD = this.itemService.loadETHUSDData().then((ETHUSDKurs) => {
            this.ETHUSDKurs = ETHUSDKurs;
        });

        let promiseIotaETH = this.itemService.loadIOTAETHData().then((IOTAETHKurs) => {
            this.IOTAETHKurs = IOTAETHKurs;
        });

        let promiseBTCUSD = this.itemService.loadBTCUSDData().then((BTCUSDKurs) => {
            this.BTCUSDKurs = BTCUSDKurs;
        });

        let promiseDashUSD = this.itemService.loadDashUSDData().then((DashUSDKurs) => {
            this.DashUSDKurs = DashUSDKurs;
        });

        let promiseDashBTC = this.itemService.loadDashBTCData().then((DashBTCKurs) => {
            this.DashBTCKurs = DashBTCKurs;
        });*/
    };
    ItemsComponent.prototype.getCourse = function (from, to, platform) {
        if (platform === "bitfinex") {
            for (var i = 0; i < this.currencyPricesBitfinex.length; i++) {
                if (this.currencyPricesBitfinex[i].currencyCodeFrom === from &&
                    this.currencyPricesBitfinex[i].currencyCodeTo === to) {
                    return this.currencyPricesBitfinex[i].price;
                }
            }
        }
        else if (platform === "bitstamp") {
            for (var i = 0; i < this.currencyPricesBitstamp.length; i++) {
                if (this.currencyPricesBitstamp[i].currencyCodeFrom === from &&
                    this.currencyPricesBitstamp[i].currencyCodeTo === to) {
                    return this.currencyPricesBitstamp[i].price;
                }
            }
        }
    };
    ItemsComponent.prototype.calculateAll = function () {
        this.calculateIOTAEuroViaBTC();
        this.calculateDashEuroViaBTC();
        this.calculateDashUSD();
        this.calculateBTCIOTA();
        this.calculateBTCEuro();
        this.calculateBTCUSD();
        this.calculateIOTAUSDViaBTC();
        this.calculateIOTAUSDViaETH();
        this.calculateAllEuroViaBTC();
        this.calculateAllUSDViaBTC();
        this.calculateAllUSDViaEthereum();
        this.calculateAllBitstamp();
    };
    ItemsComponent.prototype.calculateIOTAEuroViaBTC = function () {
        var result = (parseFloat(this.IOTAAmount) * this.getCourse("iot", "btc", "bitfinex")) * this.getCourse("btc", "eur", "bitfinex");
        this.CalcIOTAEuro = result.toString();
    };
    ItemsComponent.prototype.calculateDashEuroViaBTC = function () {
        var result = (parseFloat(this.DashAmount) * this.getCourse("dsh", "btc", "bitfinex")) * this.getCourse("btc", "eur", "bitfinex");
        this.CalcDashEuroViaBTC = result.toString();
    };
    ItemsComponent.prototype.calculateDashUSD = function () {
        var result = parseFloat(this.DashAmount) * this.getCourse("dsh", "usd", "bitfinex");
        this.CalcDashUSD = result.toString();
    };
    ItemsComponent.prototype.calculateBTCEuro = function () {
        var result = parseFloat(this.BTCAmount) * this.getCourse("btc", "eur", "bitfinex");
        this.CalcBTCEuro = result.toString();
    };
    ItemsComponent.prototype.calculateBTCUSD = function () {
        var result = parseFloat(this.BTCAmount) * this.getCourse("btc", "usd", "bitfinex");
        this.CalcBTCUSD = result.toString();
    };
    ItemsComponent.prototype.calculateIOTAUSDViaETH = function () {
        var result = (parseFloat(this.IOTAAmount) * this.getCourse("iot", "eth", "bitfinex")) * this.getCourse("eth", "usd", "bitfinex");
        this.CalcIOTAUSDViaETH = result.toString();
    };
    ItemsComponent.prototype.calculateIOTAUSDViaBTC = function () {
        var result = (parseFloat(this.IOTAAmount) * this.getCourse("iot", "btc", "bitfinex")) * this.getCourse("btc", "usd", "bitfinex");
        this.CalcIOTAUSDViaBTC = result.toString();
    };
    ItemsComponent.prototype.calculateAllEuroViaBTC = function () {
        var result = parseFloat(this.CalcBTCEuro) + parseFloat(this.CalcIOTAEuro) + parseFloat(this.CalcDashEuroViaBTC);
        this.CalcAllEuroViaBTC = result.toString();
    };
    ItemsComponent.prototype.calculateAllUSDViaEthereum = function () {
        var result = parseFloat(this.CalcIOTAUSDViaETH) + parseFloat(this.CalcBTCUSD) + parseFloat(this.CalcDashUSD);
        this.CalcAllUSDViaETH = result.toString();
    };
    ItemsComponent.prototype.calculateAllUSDViaBTC = function () {
        var result = parseFloat(this.CalcIOTAUSDViaBTC) + parseFloat(this.CalcBTCUSD) + parseFloat(this.CalcDashUSD);
        this.CalcAllUSDViaBTC = result.toString();
    };
    ItemsComponent.prototype.calculateBTCIOTA = function () {
        var result = parseFloat(this.BTCAmount) / this.getCourse("iot", "btc", "bitfinex");
        this.CalcBTCIOTA = result.toString();
    };
    ItemsComponent.prototype.calculateAllBitstamp = function () {
        var result = parseFloat(this.BitstampEuroAmount) / this.getCourse("ltc", "eur", "bitstamp");
        this.CalcBitstampLTCAmountEUR = result.toString();
        result = parseFloat(this.BitstampEuroAmount) / this.getCourse("btc", "eur", "bitstamp");
        this.CalcBitstampBTCAmountEuro = result.toString();
        result = parseFloat(this.BitstampEuroAmount) / this.getCourse("xrp", "eur", "bitstamp");
        this.CalcBitstampXRPAmountEuro = result.toString();
        result = parseFloat(this.BitstampLitecoinAmount) * this.getCourse("ltc", "eur", "bitstamp");
        this.CalcBitstampLTCEUR = result.toString();
        result = parseFloat(this.BitstampBitcoinAmount) * this.getCourse("btc", "eur", "bitstamp");
        this.CalcBitstampBTCEUR = result.toString();
        result = parseFloat(this.BitstampRipplesAmount) * this.getCourse("xrp", "eur", "bitstamp");
        this.CalcBitstampXRPEUR = result.toString();
        result = parseFloat(this.CalcBitstampBTCEUR) + parseFloat(this.CalcBitstampLTCEUR) + parseFloat(this.CalcBitstampXRPEUR);
        this.CalcBitstampAllEuro = result.toString();
    };
    ItemsComponent.prototype.onRefreshPressed = function (event) {
        var pullToRefresh = event.object;
        this.refreshAll(pullToRefresh);
    };
    ItemsComponent.prototype.readSecureStorage = function () {
        this.IOTAAmount = this.secureStorage.getSync({
            key: "bfCalcIOTAAmount"
        }) || "309";
        this.BTCAmount = this.secureStorage.getSync({
            key: "bfCalcBTCAmount"
        }) || "0.07297568";
        this.DashAmount = this.secureStorage.getSync({
            key: "bfCalcDashAmount"
        }) || "0.16300331";
        this.BitstampBitcoinAmount = this.secureStorage.getSync({
            key: "bsCalcBTCAmount"
        }) || "0";
        this.BitstampLitecoinAmount = this.secureStorage.getSync({
            key: "bsCalcLTCAmount"
        }) || "0";
        this.BitstampEuroAmount = this.secureStorage.getSync({
            key: "bsCalcEuroAmount"
        }) || "500";
        this.BitstampRipplesAmount = this.secureStorage.getSync({
            key: "bsCalcRipplesAmount"
        }) || "0";
    };
    ItemsComponent.prototype.onBitstampRipplesAmountChange = function (event) {
        this.BitstampRipplesAmount = event;
        this.secureStorage.setSync({
            key: "bsCalcRipplesAmount",
            value: this.BitstampRipplesAmount
        });
    };
    ItemsComponent.prototype.onBitstampEuroAmountChange = function (event) {
        this.BitstampEuroAmount = event;
        this.secureStorage.setSync({
            key: "bsCalcEuroAmount",
            value: this.BitstampEuroAmount
        });
    };
    ItemsComponent.prototype.onBitstampLitecoinAmountChange = function (event) {
        this.BitstampLitecoinAmount = event;
        this.secureStorage.setSync({
            key: "bsCalcLTCAmount",
            value: this.BitstampLitecoinAmount
        });
    };
    ItemsComponent.prototype.onBitstampBitcoinAmountChange = function (event) {
        this.BitstampBitcoinAmount = event;
        this.secureStorage.setSync({
            key: "bsCalcBTCAmount",
            value: this.BitstampBitcoinAmount
        });
    };
    ItemsComponent.prototype.onIOTAAmountChange = function (event) {
        this.IOTAAmount = event;
        this.secureStorage.setSync({
            key: "bfCalcIOTAAmount",
            value: this.IOTAAmount
        });
    };
    ItemsComponent.prototype.onBTCAmountChange = function (event) {
        this.BTCAmount = event;
        this.secureStorage.setSync({
            key: "bfCalcBTCAmount",
            value: this.BTCAmount
        });
    };
    ItemsComponent.prototype.onDashAmountChange = function (event) {
        this.DashAmount = event;
        this.secureStorage.setSync({
            key: "bfCalcDashAmount",
            value: this.DashAmount
        });
    };
    ItemsComponent = __decorate([
        core_1.Component({
            selector: "ns-items",
            moduleId: module.id,
            templateUrl: "./items.component.html",
        }),
        __metadata("design:paramtypes", [item_service_1.ItemService])
    ], ItemsComponent);
    return ItemsComponent;
}());
exports.ItemsComponent = ItemsComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaXRlbXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsc0NBQWtEO0FBQ2xELDJFQUE0RDtBQUU1RCxpREFBZ0Q7QUFDaEQsK0NBQTZDO0FBUTdDO0lBc0RJLHdCQUFvQixXQUF3QjtRQUF4QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQXJENUMsMkJBQXNCLEdBQW9CLENBQUUsSUFBSSw2QkFBYSxDQUFDLEtBQUssRUFBQyxLQUFLLEVBQUUsVUFBVSxDQUFDO1lBQzFDLElBQUksNkJBQWEsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztZQUMxQyxJQUFJLDZCQUFhLENBQUMsS0FBSyxFQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBRXhGLDJCQUFzQixHQUFvQixDQUFFLElBQUksNkJBQWEsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztZQUMxQyxJQUFJLDZCQUFhLENBQUMsS0FBSyxFQUFDLEtBQUssRUFBRSxVQUFVLENBQUM7WUFDMUMsSUFBSSw2QkFBYSxDQUFDLEtBQUssRUFBQyxLQUFLLEVBQUUsVUFBVSxDQUFDO1lBQzFDLElBQUksNkJBQWEsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQztZQUMxQyxJQUFJLDZCQUFhLENBQUMsS0FBSyxFQUFDLEtBQUssRUFBRSxVQUFVLENBQUM7WUFDMUMsSUFBSSw2QkFBYSxDQUFDLEtBQUssRUFBQyxLQUFLLEVBQUUsVUFBVSxDQUFDO1lBQzFDLElBQUksNkJBQWEsQ0FBQyxLQUFLLEVBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUM7UUF5Q3hGLGtCQUFhLEdBQUcsSUFBSSwyQ0FBYSxFQUFFLENBQUM7SUFFWSxDQUFDO0lBRWpELGlDQUFRLEdBQVI7UUFDSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsbUJBQW1CLEVBQUUsQ0FBQztJQUMvQixDQUFDO0lBRUQsbUNBQVUsR0FBVixVQUFXLGFBQWE7UUFDcEIsSUFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDakQsSUFBSSxlQUFlLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFFakQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRSxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNqRCxhQUFhLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUNyQyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCw0Q0FBbUIsR0FBbkI7UUFBQSxpQkFjQztRQWJHLElBQUksUUFBUSxHQUFHLEVBQUUsQ0FBQztRQUVsQixHQUFHLENBQUEsQ0FBQyxJQUFJLENBQUMsR0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNyRCxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLDhCQUE4QixDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlGLFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDM0IsQ0FBQztRQUVELE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBVSxVQUFDLE9BQU8sRUFBRSxNQUFNO1lBQ3hDLE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDO2dCQUN2QixLQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7Z0JBQ3BCLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQixDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELDRDQUFtQixHQUFuQjtRQUFBLGlCQTJDQztRQTFDRyxJQUFJLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFFbEIsR0FBRyxDQUFBLENBQUMsSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFFLENBQUMsR0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUM7WUFDckQsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM5RixRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzNCLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxPQUFPLENBQVUsVUFBQyxPQUFPLEVBQUUsTUFBTTtZQUN4QyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDdkIsS0FBSSxDQUFDLFlBQVksRUFBRSxDQUFDO2dCQUNwQixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztRQUdIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzthQTBCSztJQUNULENBQUM7SUFHRCxrQ0FBUyxHQUFULFVBQVUsSUFBSSxFQUFFLEVBQUUsRUFBRSxRQUFRO1FBQ3hCLEVBQUUsQ0FBQSxDQUFDLFFBQVEsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNyRCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLEtBQUssSUFBSTtvQkFDdkQsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDcEQsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQSxDQUFDLFFBQVEsS0FBSyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLEdBQUcsQ0FBQSxDQUFDLElBQUksQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLEdBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDO2dCQUNyRCxFQUFFLENBQUEsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDLENBQUMsZ0JBQWdCLEtBQUssSUFBSTtvQkFDdkQsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNuRCxNQUFNLENBQUMsSUFBSSxDQUFDLHNCQUFzQixDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDcEQsQ0FBQztZQUNMLENBQUM7UUFDTCxDQUFDO0lBQ0wsQ0FBQztJQUVELHFDQUFZLEdBQVo7UUFDSSxJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsdUJBQXVCLEVBQUUsQ0FBQztRQUMvQixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN4QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFFOUIsSUFBSSxDQUFDLHNCQUFzQixFQUFFLENBQUM7UUFDOUIsSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLDBCQUEwQixFQUFFLENBQUM7UUFFbEMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFDaEMsQ0FBQztJQUVELGdEQUF1QixHQUF2QjtRQUNJLElBQUksTUFBTSxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDakksSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDMUMsQ0FBQztJQUVELGdEQUF1QixHQUF2QjtRQUNJLElBQUksTUFBTSxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDakksSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRUQseUNBQWdCLEdBQWhCO1FBQ0ksSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDcEYsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVELHlDQUFnQixHQUFoQjtRQUNJLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ25GLElBQUksQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3pDLENBQUM7SUFFRCx3Q0FBZSxHQUFmO1FBQ0ksSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDbkYsSUFBSSxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDeEMsQ0FBQztJQUVELCtDQUFzQixHQUF0QjtRQUNJLElBQUksTUFBTSxHQUFHLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDakksSUFBSSxDQUFDLGlCQUFpQixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUMvQyxDQUFDO0lBRUQsK0NBQXNCLEdBQXRCO1FBQ0ksSUFBSSxNQUFNLEdBQUcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNoSSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ2hELENBQUM7SUFFRCwrQ0FBc0IsR0FBdEI7UUFDSSxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ2hILElBQUksQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDL0MsQ0FBQztJQUVELG1EQUEwQixHQUExQjtRQUNJLElBQUksTUFBTSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0csSUFBSSxDQUFDLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBRUQsOENBQXFCLEdBQXJCO1FBQ0ksSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUM3RyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzlDLENBQUM7SUFFRCx5Q0FBZ0IsR0FBaEI7UUFDSSxJQUFJLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNuRixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBR0QsNkNBQW9CLEdBQXBCO1FBQ0ksSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM1RixJQUFJLENBQUMsd0JBQXdCLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRWxELE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3hGLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFbkQsTUFBTSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDeEYsSUFBSSxDQUFDLHlCQUF5QixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVuRCxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUM1RixJQUFJLENBQUMsa0JBQWtCLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRTVDLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFNUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDM0YsSUFBSSxDQUFDLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU1QyxNQUFNLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDekgsSUFBSSxDQUFDLG1CQUFtQixHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztJQUNqRCxDQUFDO0lBRUQseUNBQWdCLEdBQWhCLFVBQWlCLEtBQUs7UUFDbEIsSUFBSSxhQUFhLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQztRQUVqQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFJRCwwQ0FBaUIsR0FBakI7UUFDSSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO1lBQ3pDLEdBQUcsRUFBRSxrQkFBa0I7U0FDMUIsQ0FBQyxJQUFJLEtBQUssQ0FBQztRQUVaLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDeEMsR0FBRyxFQUFFLGlCQUFpQjtTQUN6QixDQUFDLElBQUksWUFBWSxDQUFDO1FBRW5CLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDekMsR0FBRyxFQUFFLGtCQUFrQjtTQUMxQixDQUFDLElBQUksWUFBWSxDQUFDO1FBRW5CLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUNwRCxHQUFHLEVBQUUsaUJBQWlCO1NBQ3pCLENBQUMsSUFBSSxHQUFHLENBQUM7UUFFVixJQUFJLENBQUMsc0JBQXNCLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDckQsR0FBRyxFQUFFLGlCQUFpQjtTQUN6QixDQUFDLElBQUksR0FBRyxDQUFDO1FBRVYsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO1lBQ2pELEdBQUcsRUFBRSxrQkFBa0I7U0FDMUIsQ0FBQyxJQUFJLEtBQUssQ0FBQztRQUVaLElBQUksQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUNwRCxHQUFHLEVBQUUscUJBQXFCO1NBQzdCLENBQUMsSUFBSSxHQUFHLENBQUM7SUFDZCxDQUFDO0lBRUQsc0RBQTZCLEdBQTdCLFVBQThCLEtBQUs7UUFDL0IsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztRQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUN2QixHQUFHLEVBQUUscUJBQXFCO1lBQzFCLEtBQUssRUFBRSxJQUFJLENBQUMscUJBQXFCO1NBQ3BDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCxtREFBMEIsR0FBMUIsVUFBMkIsS0FBSztRQUM1QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsS0FBSyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO1lBQ3ZCLEdBQUcsRUFBRSxrQkFBa0I7WUFDdkIsS0FBSyxFQUFFLElBQUksQ0FBQyxrQkFBa0I7U0FDakMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVELHVEQUE4QixHQUE5QixVQUErQixLQUFLO1FBQ2hDLElBQUksQ0FBQyxzQkFBc0IsR0FBRyxLQUFLLENBQUM7UUFDcEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDdkIsR0FBRyxFQUFFLGlCQUFpQjtZQUN0QixLQUFLLEVBQUUsSUFBSSxDQUFDLHNCQUFzQjtTQUNyQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsc0RBQTZCLEdBQTdCLFVBQThCLEtBQUs7UUFDL0IsSUFBSSxDQUFDLHFCQUFxQixHQUFHLEtBQUssQ0FBQztRQUNuQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUN2QixHQUFHLEVBQUUsaUJBQWlCO1lBQ3RCLEtBQUssRUFBRSxJQUFJLENBQUMscUJBQXFCO1NBQ3BDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCwyQ0FBa0IsR0FBbEIsVUFBbUIsS0FBSztRQUNwQixJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztRQUN4QixJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQztZQUN2QixHQUFHLEVBQUUsa0JBQWtCO1lBQ3ZCLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVTtTQUN6QixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsMENBQWlCLEdBQWpCLFVBQWtCLEtBQUs7UUFDbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDdkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDdkIsR0FBRyxFQUFFLGlCQUFpQjtZQUN0QixLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVM7U0FDeEIsQ0FBQyxDQUFDO0lBRVAsQ0FBQztJQUVELDJDQUFrQixHQUFsQixVQUFtQixLQUFLO1FBQ3BCLElBQUksQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDO1lBQ3ZCLEdBQUcsRUFBRSxrQkFBa0I7WUFDdkIsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVO1NBQ3pCLENBQUMsQ0FBQztJQUNQLENBQUM7SUFwVlEsY0FBYztRQUwxQixnQkFBUyxDQUFDO1lBQ1AsUUFBUSxFQUFFLFVBQVU7WUFDcEIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1lBQ25CLFdBQVcsRUFBRSx3QkFBd0I7U0FDeEMsQ0FBQzt5Q0F1RG1DLDBCQUFXO09BdERuQyxjQUFjLENBcVYxQjtJQUFELHFCQUFDO0NBQUEsQUFyVkQsSUFxVkM7QUFyVlksd0NBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gXCJAYW5ndWxhci9jb3JlXCI7XG5pbXBvcnQgeyBTZWN1cmVTdG9yYWdlIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1zZWN1cmUtc3RvcmFnZVwiO1xuXG5pbXBvcnQgeyBDdXJyZW5jeVByaWNlIH0gZnJvbSAnLi9DdXJyZW5jeVByaWNlJztcbmltcG9ydCB7IEl0ZW1TZXJ2aWNlIH0gZnJvbSBcIi4vaXRlbS5zZXJ2aWNlXCI7XG5cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6IFwibnMtaXRlbXNcIixcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHRlbXBsYXRlVXJsOiBcIi4vaXRlbXMuY29tcG9uZW50Lmh0bWxcIixcbn0pXG5leHBvcnQgY2xhc3MgSXRlbXNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAgIGN1cnJlbmN5UHJpY2VzQml0c3RhbXA6IEN1cnJlbmN5UHJpY2VbXSA9IFsgbmV3IEN1cnJlbmN5UHJpY2UoXCJsdGNcIixcImV1clwiLCBcImJpdHN0YW1wXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJidGNcIixcImV1clwiLCBcImJpdHN0YW1wXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJ4cnBcIixcImV1clwiLCBcImJpdHN0YW1wXCIpXTtcblxuICAgIGN1cnJlbmN5UHJpY2VzQml0ZmluZXg6IEN1cnJlbmN5UHJpY2VbXSA9IFsgbmV3IEN1cnJlbmN5UHJpY2UoXCJpb3RcIixcImJ0Y1wiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJidGNcIixcImV1clwiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJldGhcIixcInVzZFwiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJpb3RcIixcImV0aFwiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJidGNcIixcInVzZFwiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJkc2hcIixcInVzZFwiLCBcImJpdGZpbmV4XCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1cnJlbmN5UHJpY2UoXCJkc2hcIixcImJ0Y1wiLCBcImJpdGZpbmV4XCIpXTtcblxuICAgIElPVEFCVENLdXJzOiBzdHJpbmc7XG4gICAgQlRDRVVSS3Vyczogc3RyaW5nO1xuICAgIEJUQ1VTREt1cnM6IHN0cmluZztcbiAgICBJT1RBRVRIS3Vyczogc3RyaW5nO1xuICAgIEVUSFVTREt1cnM6IHN0cmluZztcbiAgICBEYXNoQlRDS3Vyczogc3RyaW5nO1xuICAgIERhc2hVU0RLdXJzOiBzdHJpbmc7XG4gICAgQml0c3RhbXBCVENFVVJLdXJzOiBzdHJpbmc7XG4gICAgQml0c3RhbXBMVENFVVJLdXJzOiBzdHJpbmc7XG4gICAgQml0c3RhbXBYUlBFVVJLdXJzOiBzdHJpbmc7XG5cbiAgICBDYWxjSU9UQUV1cm86IHN0cmluZztcbiAgICBDYWxjSU9UQVVTRFZpYUVUSDogc3RyaW5nO1xuICAgIENhbGNJT1RBVVNEVmlhQlRDOiBzdHJpbmc7XG4gICAgQ2FsY0Rhc2hFdXJvVmlhQlRDOiBzdHJpbmc7XG4gICAgQ2FsY0Rhc2hVU0Q6IHN0cmluZztcbiAgICBDYWxjQlRDRXVybzogc3RyaW5nO1xuICAgIENhbGNCVENVU0Q6IHN0cmluZztcbiAgICBDYWxjQlRDSU9UQTogc3RyaW5nO1xuICAgIENhbGNBbGxFdXJvVmlhQlRDOiBzdHJpbmc7XG4gICAgQ2FsY0FsbFVTRFZpYUVUSDogc3RyaW5nO1xuICAgIENhbGNBbGxVU0RWaWFCVEM6IHN0cmluZztcblxuICAgIENhbGNCaXRzdGFtcExUQ0Ftb3VudEVVUjogc3RyaW5nO1xuICAgIENhbGNCaXRzdGFtcEJUQ0Ftb3VudEV1cm86IHN0cmluZztcbiAgICBDYWxjQml0c3RhbXBYUlBBbW91bnRFdXJvOiBzdHJpbmc7XG4gICAgQ2FsY0JpdHN0YW1wTFRDRVVSOiBzdHJpbmc7XG4gICAgQ2FsY0JpdHN0YW1wQlRDRVVSOiBzdHJpbmc7XG4gICAgQ2FsY0JpdHN0YW1wWFJQRVVSOiBzdHJpbmc7XG4gICAgQ2FsY0JpdHN0YW1wQWxsRXVybzogc3RyaW5nO1xuXG4gICAgSU9UQUFtb3VudDogc3RyaW5nO1xuICAgIEJUQ0Ftb3VudDogc3RyaW5nO1xuICAgIERhc2hBbW91bnQ6IHN0cmluZztcbiAgICBCaXRzdGFtcEV1cm9BbW91bnQ6IHN0cmluZztcbiAgICBCaXRzdGFtcExpdGVjb2luQW1vdW50OiBzdHJpbmc7XG4gICAgQml0c3RhbXBCaXRjb2luQW1vdW50OiBzdHJpbmc7XG4gICAgQml0c3RhbXBSaXBwbGVzQW1vdW50OiBzdHJpbmc7XG5cbiAgICBzZWN1cmVTdG9yYWdlID0gbmV3IFNlY3VyZVN0b3JhZ2UoKTtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaXRlbVNlcnZpY2U6IEl0ZW1TZXJ2aWNlKSB7IH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLnJlYWRTZWN1cmVTdG9yYWdlKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaEJpdGZpbmV4RGF0YSgpO1xuICAgICAgICB0aGlzLnJlZnJlc2hCaXRzdGFtcERhdGEoKTtcbiAgICB9XG5cbiAgICByZWZyZXNoQWxsKHB1bGxUb1JlZnJlc2gpIHtcbiAgICAgICAgbGV0IHByb21pc2VCaXRmaW5leCA9IHRoaXMucmVmcmVzaEJpdGZpbmV4RGF0YSgpO1xuICAgICAgICBsZXQgcHJvbWlzZUJpdHN0YW1wID0gdGhpcy5yZWZyZXNoQml0c3RhbXBEYXRhKCk7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwoW3Byb21pc2VCaXRmaW5leCwgcHJvbWlzZUJpdHN0YW1wXSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBwdWxsVG9SZWZyZXNoLnJlZnJlc2hpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaEJpdHN0YW1wRGF0YSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cbiAgICAgICAgZm9yKHZhciBpPTA7IGk8dGhpcy5jdXJyZW5jeVByaWNlc0JpdHN0YW1wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IHRoaXMuaXRlbVNlcnZpY2UubG9hZERhdGFGcm9tQml0c3RhbXBXaXRoU3ltYm9sKHRoaXMuY3VycmVuY3lQcmljZXNCaXRzdGFtcFtpXSk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPGJvb2xlYW4+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUFsbCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVmcmVzaEJpdGZpbmV4RGF0YSgpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmN1cnJlbmN5UHJpY2VzQml0ZmluZXgubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gdGhpcy5pdGVtU2VydmljZS5sb2FkRGF0YUZyb21CaXRmaW5leFdpdGhTeW1ib2wodGhpcy5jdXJyZW5jeVByaWNlc0JpdGZpbmV4W2ldKTtcbiAgICAgICAgICAgIHByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8Ym9vbGVhbj4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsY3VsYXRlQWxsKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qbGV0IHByb21pc2VJb3RhID0gdGhpcy5pdGVtU2VydmljZS5sb2FkSW90YUJUQ0RhdGEoKS50aGVuKChCVENLdXJzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLklPVEFCVENLdXJzID0gQlRDS3VycztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHByb21pc2VCVENFdXJvID0gdGhpcy5pdGVtU2VydmljZS5sb2FkQlRDRXVyb0RhdGEoKS50aGVuKChCVENFdXJvS3VycykgPT4ge1xuICAgICAgICAgICAgdGhpcy5CVENFVVJLdXJzID0gQlRDRXVyb0t1cnM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBwcm9taXNlRVRIVVNEID0gdGhpcy5pdGVtU2VydmljZS5sb2FkRVRIVVNERGF0YSgpLnRoZW4oKEVUSFVTREt1cnMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRVRIVVNES3VycyA9IEVUSFVTREt1cnM7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBwcm9taXNlSW90YUVUSCA9IHRoaXMuaXRlbVNlcnZpY2UubG9hZElPVEFFVEhEYXRhKCkudGhlbigoSU9UQUVUSEt1cnMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuSU9UQUVUSEt1cnMgPSBJT1RBRVRIS3VycztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHByb21pc2VCVENVU0QgPSB0aGlzLml0ZW1TZXJ2aWNlLmxvYWRCVENVU0REYXRhKCkudGhlbigoQlRDVVNES3VycykgPT4ge1xuICAgICAgICAgICAgdGhpcy5CVENVU0RLdXJzID0gQlRDVVNES3VycztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHByb21pc2VEYXNoVVNEID0gdGhpcy5pdGVtU2VydmljZS5sb2FkRGFzaFVTRERhdGEoKS50aGVuKChEYXNoVVNES3VycykgPT4ge1xuICAgICAgICAgICAgdGhpcy5EYXNoVVNES3VycyA9IERhc2hVU0RLdXJzO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgcHJvbWlzZURhc2hCVEMgPSB0aGlzLml0ZW1TZXJ2aWNlLmxvYWREYXNoQlRDRGF0YSgpLnRoZW4oKERhc2hCVENLdXJzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkRhc2hCVENLdXJzID0gRGFzaEJUQ0t1cnM7XG4gICAgICAgIH0pOyovXG4gICAgfVxuXG5cbiAgICBnZXRDb3Vyc2UoZnJvbSwgdG8sIHBsYXRmb3JtKTogbnVtYmVyIHtcbiAgICAgICAgaWYocGxhdGZvcm0gPT09IFwiYml0ZmluZXhcIikge1xuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8dGhpcy5jdXJyZW5jeVByaWNlc0JpdGZpbmV4Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5jdXJyZW5jeVByaWNlc0JpdGZpbmV4W2ldLmN1cnJlbmN5Q29kZUZyb20gPT09IGZyb20gJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW5jeVByaWNlc0JpdGZpbmV4W2ldLmN1cnJlbmN5Q29kZVRvID09PSB0bykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVuY3lQcmljZXNCaXRmaW5leFtpXS5wcmljZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZihwbGF0Zm9ybSA9PT0gXCJiaXRzdGFtcFwiKSB7XG4gICAgICAgICAgICBmb3IodmFyIGk9MDsgaTx0aGlzLmN1cnJlbmN5UHJpY2VzQml0c3RhbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLmN1cnJlbmN5UHJpY2VzQml0c3RhbXBbaV0uY3VycmVuY3lDb2RlRnJvbSA9PT0gZnJvbSAmJlxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbmN5UHJpY2VzQml0c3RhbXBbaV0uY3VycmVuY3lDb2RlVG8gPT09IHRvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW5jeVByaWNlc0JpdHN0YW1wW2ldLnByaWNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNhbGN1bGF0ZUFsbCgpIHtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVJT1RBRXVyb1ZpYUJUQygpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZURhc2hFdXJvVmlhQlRDKCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlRGFzaFVTRCgpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZUJUQ0lPVEEoKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVCVENFdXJvKCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlQlRDVVNEKCk7XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlSU9UQVVTRFZpYUJUQygpO1xuICAgICAgICB0aGlzLmNhbGN1bGF0ZUlPVEFVU0RWaWFFVEgoKTtcblxuICAgICAgICB0aGlzLmNhbGN1bGF0ZUFsbEV1cm9WaWFCVEMoKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVBbGxVU0RWaWFCVEMoKTtcbiAgICAgICAgdGhpcy5jYWxjdWxhdGVBbGxVU0RWaWFFdGhlcmV1bSgpO1xuXG4gICAgICAgIHRoaXMuY2FsY3VsYXRlQWxsQml0c3RhbXAoKTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVJT1RBRXVyb1ZpYUJUQygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IChwYXJzZUZsb2F0KHRoaXMuSU9UQUFtb3VudCkgKiB0aGlzLmdldENvdXJzZShcImlvdFwiLCBcImJ0Y1wiLCBcImJpdGZpbmV4XCIpKSAqIHRoaXMuZ2V0Q291cnNlKFwiYnRjXCIsIFwiZXVyXCIsIFwiYml0ZmluZXhcIik7XG4gICAgICAgIHRoaXMuQ2FsY0lPVEFFdXJvID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlRGFzaEV1cm9WaWFCVEMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSAocGFyc2VGbG9hdCh0aGlzLkRhc2hBbW91bnQpICogdGhpcy5nZXRDb3Vyc2UoXCJkc2hcIiwgXCJidGNcIiwgXCJiaXRmaW5leFwiKSkgKiB0aGlzLmdldENvdXJzZShcImJ0Y1wiLCBcImV1clwiLCBcImJpdGZpbmV4XCIpO1xuICAgICAgICB0aGlzLkNhbGNEYXNoRXVyb1ZpYUJUQyA9IHJlc3VsdC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZURhc2hVU0QoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUZsb2F0KHRoaXMuRGFzaEFtb3VudCkgKiB0aGlzLmdldENvdXJzZShcImRzaFwiLCBcInVzZFwiLCBcImJpdGZpbmV4XCIpO1xuICAgICAgICB0aGlzLkNhbGNEYXNoVVNEID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlQlRDRXVybygpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5CVENBbW91bnQpICogdGhpcy5nZXRDb3Vyc2UoXCJidGNcIiwgXCJldXJcIiwgXCJiaXRmaW5leFwiKTtcbiAgICAgICAgdGhpcy5DYWxjQlRDRXVybyA9IHJlc3VsdC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZUJUQ1VTRCgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5CVENBbW91bnQpICogdGhpcy5nZXRDb3Vyc2UoXCJidGNcIiwgXCJ1c2RcIiwgXCJiaXRmaW5leFwiKTtcbiAgICAgICAgdGhpcy5DYWxjQlRDVVNEID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlSU9UQVVTRFZpYUVUSCgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IChwYXJzZUZsb2F0KHRoaXMuSU9UQUFtb3VudCkgKiB0aGlzLmdldENvdXJzZShcImlvdFwiLCBcImV0aFwiLCBcImJpdGZpbmV4XCIpKSAqIHRoaXMuZ2V0Q291cnNlKFwiZXRoXCIsIFwidXNkXCIsIFwiYml0ZmluZXhcIik7XG4gICAgICAgIHRoaXMuQ2FsY0lPVEFVU0RWaWFFVEggPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVJT1RBVVNEVmlhQlRDKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gKHBhcnNlRmxvYXQodGhpcy5JT1RBQW1vdW50KSAqIHRoaXMuZ2V0Q291cnNlKFwiaW90XCIsIFwiYnRjXCIsIFwiYml0ZmluZXhcIikpICogdGhpcy5nZXRDb3Vyc2UoXCJidGNcIiwgXCJ1c2RcIiwgXCJiaXRmaW5leFwiKTtcbiAgICAgICAgIHRoaXMuQ2FsY0lPVEFVU0RWaWFCVEMgPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVBbGxFdXJvVmlhQlRDKCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gcGFyc2VGbG9hdCh0aGlzLkNhbGNCVENFdXJvKSArIHBhcnNlRmxvYXQodGhpcy5DYWxjSU9UQUV1cm8pICsgcGFyc2VGbG9hdCh0aGlzLkNhbGNEYXNoRXVyb1ZpYUJUQyk7XG4gICAgICAgIHRoaXMuQ2FsY0FsbEV1cm9WaWFCVEMgPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVBbGxVU0RWaWFFdGhlcmV1bSgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5DYWxjSU9UQVVTRFZpYUVUSCkgKyBwYXJzZUZsb2F0KHRoaXMuQ2FsY0JUQ1VTRCkgKyBwYXJzZUZsb2F0KHRoaXMuQ2FsY0Rhc2hVU0QpO1xuICAgICAgICB0aGlzLkNhbGNBbGxVU0RWaWFFVEggPSByZXN1bHQudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVBbGxVU0RWaWFCVEMoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUZsb2F0KHRoaXMuQ2FsY0lPVEFVU0RWaWFCVEMpICsgcGFyc2VGbG9hdCh0aGlzLkNhbGNCVENVU0QpICsgcGFyc2VGbG9hdCh0aGlzLkNhbGNEYXNoVVNEKTtcbiAgICAgICAgdGhpcy5DYWxjQWxsVVNEVmlhQlRDID0gcmVzdWx0LnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgY2FsY3VsYXRlQlRDSU9UQSgpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5CVENBbW91bnQpIC8gdGhpcy5nZXRDb3Vyc2UoXCJpb3RcIiwgXCJidGNcIiwgXCJiaXRmaW5leFwiKTtcbiAgICAgICAgdGhpcy5DYWxjQlRDSU9UQSA9IHJlc3VsdC50b1N0cmluZygpO1xuICAgIH1cblxuXG4gICAgY2FsY3VsYXRlQWxsQml0c3RhbXAoKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBwYXJzZUZsb2F0KHRoaXMuQml0c3RhbXBFdXJvQW1vdW50KSAvIHRoaXMuZ2V0Q291cnNlKFwibHRjXCIsIFwiZXVyXCIsIFwiYml0c3RhbXBcIik7XG4gICAgICAgIHRoaXMuQ2FsY0JpdHN0YW1wTFRDQW1vdW50RVVSID0gcmVzdWx0LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmVzdWx0ID0gcGFyc2VGbG9hdCh0aGlzLkJpdHN0YW1wRXVyb0Ftb3VudCkgLyB0aGlzLmdldENvdXJzZShcImJ0Y1wiLCBcImV1clwiLCBcImJpdHN0YW1wXCIpO1xuICAgICAgICB0aGlzLkNhbGNCaXRzdGFtcEJUQ0Ftb3VudEV1cm8gPSByZXN1bHQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXN1bHQgPSBwYXJzZUZsb2F0KHRoaXMuQml0c3RhbXBFdXJvQW1vdW50KSAvIHRoaXMuZ2V0Q291cnNlKFwieHJwXCIsIFwiZXVyXCIsIFwiYml0c3RhbXBcIik7XG4gICAgICAgIHRoaXMuQ2FsY0JpdHN0YW1wWFJQQW1vdW50RXVybyA9IHJlc3VsdC50b1N0cmluZygpO1xuXG4gICAgICAgIHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5CaXRzdGFtcExpdGVjb2luQW1vdW50KSAqIHRoaXMuZ2V0Q291cnNlKFwibHRjXCIsIFwiZXVyXCIsIFwiYml0c3RhbXBcIik7XG4gICAgICAgIHRoaXMuQ2FsY0JpdHN0YW1wTFRDRVVSID0gcmVzdWx0LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgcmVzdWx0ID0gcGFyc2VGbG9hdCh0aGlzLkJpdHN0YW1wQml0Y29pbkFtb3VudCkgKiB0aGlzLmdldENvdXJzZShcImJ0Y1wiLCBcImV1clwiLCBcImJpdHN0YW1wXCIpO1xuICAgICAgICB0aGlzLkNhbGNCaXRzdGFtcEJUQ0VVUiA9IHJlc3VsdC50b1N0cmluZygpO1xuXG4gICAgICAgIHJlc3VsdCA9IHBhcnNlRmxvYXQodGhpcy5CaXRzdGFtcFJpcHBsZXNBbW91bnQpICogdGhpcy5nZXRDb3Vyc2UoXCJ4cnBcIiwgXCJldXJcIiwgXCJiaXRzdGFtcFwiKTtcbiAgICAgICAgdGhpcy5DYWxjQml0c3RhbXBYUlBFVVIgPSByZXN1bHQudG9TdHJpbmcoKTtcblxuICAgICAgICByZXN1bHQgPSBwYXJzZUZsb2F0KHRoaXMuQ2FsY0JpdHN0YW1wQlRDRVVSKSArIHBhcnNlRmxvYXQodGhpcy5DYWxjQml0c3RhbXBMVENFVVIpICsgcGFyc2VGbG9hdCh0aGlzLkNhbGNCaXRzdGFtcFhSUEVVUik7XG4gICAgICAgIHRoaXMuQ2FsY0JpdHN0YW1wQWxsRXVybyA9IHJlc3VsdC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIG9uUmVmcmVzaFByZXNzZWQoZXZlbnQpIHtcbiAgICAgICAgdmFyIHB1bGxUb1JlZnJlc2ggPSBldmVudC5vYmplY3Q7XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoQWxsKHB1bGxUb1JlZnJlc2gpO1xuICAgIH1cblxuXG5cbiAgICByZWFkU2VjdXJlU3RvcmFnZSgpIHtcbiAgICAgICAgdGhpcy5JT1RBQW1vdW50ID0gdGhpcy5zZWN1cmVTdG9yYWdlLmdldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJmQ2FsY0lPVEFBbW91bnRcIlxuICAgICAgICB9KSB8fCBcIjMwOVwiO1xuXG4gICAgICAgIHRoaXMuQlRDQW1vdW50ID0gdGhpcy5zZWN1cmVTdG9yYWdlLmdldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJmQ2FsY0JUQ0Ftb3VudFwiXG4gICAgICAgIH0pIHx8IFwiMC4wNzI5NzU2OFwiO1xuXG4gICAgICAgIHRoaXMuRGFzaEFtb3VudCA9IHRoaXMuc2VjdXJlU3RvcmFnZS5nZXRTeW5jKHtcbiAgICAgICAgICAgIGtleTogXCJiZkNhbGNEYXNoQW1vdW50XCJcbiAgICAgICAgfSkgfHwgXCIwLjE2MzAwMzMxXCI7XG5cbiAgICAgICAgdGhpcy5CaXRzdGFtcEJpdGNvaW5BbW91bnQgPSB0aGlzLnNlY3VyZVN0b3JhZ2UuZ2V0U3luYyh7XG4gICAgICAgICAgICBrZXk6IFwiYnNDYWxjQlRDQW1vdW50XCJcbiAgICAgICAgfSkgfHwgXCIwXCI7XG5cbiAgICAgICAgdGhpcy5CaXRzdGFtcExpdGVjb2luQW1vdW50ID0gdGhpcy5zZWN1cmVTdG9yYWdlLmdldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJzQ2FsY0xUQ0Ftb3VudFwiXG4gICAgICAgIH0pIHx8IFwiMFwiO1xuXG4gICAgICAgIHRoaXMuQml0c3RhbXBFdXJvQW1vdW50ID0gdGhpcy5zZWN1cmVTdG9yYWdlLmdldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJzQ2FsY0V1cm9BbW91bnRcIlxuICAgICAgICB9KSB8fCBcIjUwMFwiO1xuXG4gICAgICAgIHRoaXMuQml0c3RhbXBSaXBwbGVzQW1vdW50ID0gdGhpcy5zZWN1cmVTdG9yYWdlLmdldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJzQ2FsY1JpcHBsZXNBbW91bnRcIlxuICAgICAgICB9KSB8fCBcIjBcIjtcbiAgICB9XG5cbiAgICBvbkJpdHN0YW1wUmlwcGxlc0Ftb3VudENoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLkJpdHN0YW1wUmlwcGxlc0Ftb3VudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLnNlY3VyZVN0b3JhZ2Uuc2V0U3luYyh7XG4gICAgICAgICAgICBrZXk6IFwiYnNDYWxjUmlwcGxlc0Ftb3VudFwiLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMuQml0c3RhbXBSaXBwbGVzQW1vdW50XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQml0c3RhbXBFdXJvQW1vdW50Q2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuQml0c3RhbXBFdXJvQW1vdW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuc2VjdXJlU3RvcmFnZS5zZXRTeW5jKHtcbiAgICAgICAgICAgIGtleTogXCJic0NhbGNFdXJvQW1vdW50XCIsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5CaXRzdGFtcEV1cm9BbW91bnRcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25CaXRzdGFtcExpdGVjb2luQW1vdW50Q2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuQml0c3RhbXBMaXRlY29pbkFtb3VudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLnNlY3VyZVN0b3JhZ2Uuc2V0U3luYyh7XG4gICAgICAgICAgICBrZXk6IFwiYnNDYWxjTFRDQW1vdW50XCIsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5CaXRzdGFtcExpdGVjb2luQW1vdW50XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQml0c3RhbXBCaXRjb2luQW1vdW50Q2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuQml0c3RhbXBCaXRjb2luQW1vdW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuc2VjdXJlU3RvcmFnZS5zZXRTeW5jKHtcbiAgICAgICAgICAgIGtleTogXCJic0NhbGNCVENBbW91bnRcIixcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLkJpdHN0YW1wQml0Y29pbkFtb3VudFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbklPVEFBbW91bnRDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5JT1RBQW1vdW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuc2VjdXJlU3RvcmFnZS5zZXRTeW5jKHtcbiAgICAgICAgICAgIGtleTogXCJiZkNhbGNJT1RBQW1vdW50XCIsXG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5JT1RBQW1vdW50XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQlRDQW1vdW50Q2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuQlRDQW1vdW50ID0gZXZlbnQ7XG4gICAgICAgIHRoaXMuc2VjdXJlU3RvcmFnZS5zZXRTeW5jKHtcbiAgICAgICAgICAgIGtleTogXCJiZkNhbGNCVENBbW91bnRcIixcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLkJUQ0Ftb3VudFxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIG9uRGFzaEFtb3VudENoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLkRhc2hBbW91bnQgPSBldmVudDtcbiAgICAgICAgdGhpcy5zZWN1cmVTdG9yYWdlLnNldFN5bmMoe1xuICAgICAgICAgICAga2V5OiBcImJmQ2FsY0Rhc2hBbW91bnRcIixcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLkRhc2hBbW91bnRcbiAgICAgICAgfSk7XG4gICAgfVxufSJdfQ==